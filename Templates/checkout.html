<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Checkout</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<style>
    /* Ayurveda Theme Colors */
    :root {
        --primary: #4caf50; /* Herbal Green */
        --secondary: #8bc34a; /* Light Green */
        --accent: #f4f1ea; /* Creamy Background */
        --text-dark: #2f3e2f;
        --btn-hover: #388e3c;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, var(--accent), #ffffff);
        margin: 0;
        padding: 0;
        animation: fadeIn 1.5s ease-in-out;
    }

    .checkout-container {
        max-width: 650px;
        margin: 40px auto;
        background: #fff;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        position: relative;
        overflow: hidden;
    }

    h2 {
        text-align: center;
        color: var(--text-dark);
        font-size: 28px;
        font-weight: bold;
        margin-bottom: 15px;
        animation: shimmer 2s infinite linear;
    }

    .product-summary {
        background: var(--accent);
        padding: 15px;
        border-radius: 12px;
        margin-bottom: 20px;
        border: 1px solid #d9e4d1;
    }

    .form-group label {
        font-weight: 600;
        color: var(--text-dark);
    }

    input, textarea, select {
        width: 100%;
        padding: 12px;
        border: 2px solid #d9e4d1;
        border-radius: 12px;
        font-size: 16px;
        transition: 0.3s;
    }

    input:focus, textarea:focus, select:focus {
        border-color: var(--primary);
        outline: none;
        box-shadow: 0 0 10px rgba(76,175,80,0.3);
    }

    .btn-primary {
        background: var(--primary);
        color: white;
        padding: 14px;
        border: none;
        border-radius: 12px;
        font-size: 18px;
        width: 100%;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transition: transform 0.3s ease-in-out, background 0.3s;
    }

    .btn-primary:hover {
        background: var(--btn-hover);
        transform: scale(1.05);
    }

    .btn-primary:disabled {
        background: #ccc;
        cursor: not-allowed;
    }

    /* Ripple Effect on Buttons */
    .btn-primary:active::after {
        content: "";
        position: absolute;
        width: 200%;
        height: 200%;
        background: rgba(255,255,255,0.4);
        top: -50%;
        left: -50%;
        border-radius: 50%;
        transform: scale(0);
        animation: ripple 0.6s linear;
    }

    /* OTP Modal */
    .otp-modal {
        display: none;
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.5);
        justify-content: center;
        align-items: center;
        animation: fadeIn 0.8s ease-in-out;
    }

    .otp-modal-content {
        background: #fff;
        padding: 25px;
        border-radius: 16px;
        width: 90%;
        max-width: 420px;
        text-align: center;
        animation: slideUp 0.6s ease-in-out;
    }

    .otp-input {
        padding: 12px;
        width: 80%;
        margin: 15px auto;
        font-size: 22px;
        text-align: center;
        border: 2px solid #ccc;
        border-radius: 10px;
        transition: 0.3s;
    }

    .otp-input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 8px rgba(76,175,80,0.4);
    }

    .otp-buttons button {
        margin: 8px;
        padding: 12px 18px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        cursor: pointer;
        color: #fff;
        transition: 0.3s;
    }

    .btn-verify { background: var(--primary); }
    .btn-resend { background: #00796b; }
    .btn-cancel { background: #d32f2f; }

    .otp-buttons button:hover {
        transform: scale(1.05);
    }

    /* Animations */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes slideUp {
        from { transform: translateY(50px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    @keyframes ripple {
        to {
            transform: scale(1);
            opacity: 0;
        }
    }

    @keyframes shimmer {
        0% { background-position: -200px 0; }
        100% { background-position: 200px 0; }
    }
</style>

</head>
<body>
    <div class="checkout-container">
        <h2>Secure Checkout</h2>

        <!-- Product Summary -->
        <div class="product-summary">
            <center>

            
            {% if product %}
                <img src="{{ url_for('static', filename=product['image']) }}" alt="{{ product.name }}" width="150" height="150">
                <h3>{{ product.name }}</h3>
                <p>Price: ₹{{ product.price }}</p>
                <p>Quantity: {{ product.quantity }}</p>
                <p>Total: ₹{{ product.price * product.quantity }}</p>
            {% else %}
                <p>Cart Items Checkout</p>
            {% endif %}
            </center>
        </div>

       
  


        <!-- Checkout Form -->
        <form id="checkout-form" method="POST" action="{{ url_for('place_order') }}">
    <input type="hidden" name="product_name" value="{{ product.name if product else 'Cart Items' }}">
    <input type="hidden" name="quantity" value="{{ product.quantity if product else 1 }}">
    <input type="hidden" name="product_price" value="{{ product.price if product else 0 }}">


            <div class="form-group">
                <label>Email Address *</label>
                <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
                <label>Full Name *</label>
                <input type="text" name="customer_name" required>
            </div>

            <div class="form-group">
                <label>Phone *</label>
                <input type="text" name="phone" required>
            </div>

            <div class="form-group">
                <label>Address *</label>
                <textarea name="address" rows="3" required></textarea>
            </div>

            <div class="form-group">
                <label>Payment Method *</label>
                <select name="payment_method" required>
                    <option value="Cash on Delivery">Cash on Delivery</option>
                    <option value="UPI">UPI</option>
                    <option value="Card">Credit/Debit Card</option>
                </select>
            </div>

            <button type="button" class="btn-primary" id="buy-now-btn">Verify Email & Proceed</button>
            <br><br>
            <button type="submit" id="place-order-btn" class="btn-primary" disabled>Place Order Securely</button>
        </form>
    </div>

    <!-- OTP Modal -->
    <div class="otp-modal" id="otp-modal">
        <div class="otp-modal-content">
            <h3>Email Verification</h3>
            <p>Enter the 6-digit OTP sent to your email</p>
            <input type="text" id="otp-input" class="otp-input" maxlength="6" placeholder="Enter OTP">
            <div class="otp-buttons">
                <button class="btn-verify" id="verify-otp-btn">Verify OTP</button>
                <button class="btn-resend" id="resend-otp-btn">Resend OTP</button>
                <button class="btn-cancel" id="cancel-otp-btn">Cancel</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/otp.js') }}"></script>
</body>
</html>
